<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta property="og:title" content="Gathering Crash Reports and User Feedback for Your Android App"><meta property="og:title" content="Gathering Crash Reports and User Feedback for Your Android App"><meta property="og:description" content="tl;dr: How-to use ACRA and a PHP-script for getting fairly pretty crash-reports and user-feedback via email (without ugly Android email-Intents)
Introduction I&rsquo;m the developer of OpenTraining, an open source Android app for fitness training. I recently looked for a possibility to add a simple feedback system to my app. There&rsquo;s an open source framework for crash reports named ACRA that I decided to use for both crash reports and user feedback."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.thalheim.io/2014/06/10/gathering-crash-reports-and-user-feedback-for-your-android-app/"><meta property="article:published_time" content="2014-06-10T00:00:00+00:00"><meta property="article:modified_time" content="2014-06-10T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Gathering Crash Reports and User Feedback for Your Android App"><meta name=twitter:description content="tl;dr: How-to use ACRA and a PHP-script for getting fairly pretty crash-reports and user-feedback via email (without ugly Android email-Intents)
Introduction I&rsquo;m the developer of OpenTraining, an open source Android app for fitness training. I recently looked for a possibility to add a simple feedback system to my app. There&rsquo;s an open source framework for crash reports named ACRA that I decided to use for both crash reports and user feedback."><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><link rel=stylesheet type=text/css media=screen href=/css/all.css><title>Gathering Crash Reports and User Feedback for Your Android App | ~/git/blog</title></head><body><header><div id=titletext><h2 id=title><a href=https://blog.thalheim.io/>~/git/blog</a></h2></div><div id=title-description><p id=subtitle>My brain-dump of random code/configuration.</p><div id=social><nav><ul><li><a href=/index.html><i title=RSS class="icons fas fa-rss"></i></a></li><li><a href=https://github.com/Mic92/blog><i title=Github class="icons fab fa-github"></i></a></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=/>Home</a></li><li><a href=/post>All Posts</a></li><li><a href=/categories>Categories</a></li></ul></nav></div></header><main><div class=post><div class=author></div><div class=post-header><div class=meta><div class=date><span class=day>10</span>
<span class=rest>Jun 2014</span></div></div><div class=matter><h1 class=title>Gathering Crash Reports and User Feedback for Your Android App</h1></div></div><div class=markdown><p><strong>tl;dr:</strong> How-to use ACRA and a PHP-script for getting <strong>fairly pretty crash-reports and
user-feedback via email</strong> (without ugly Android email-Intents)</p><h2 id=introduction>Introduction</h2><p>I&rsquo;m the developer of <a href=https://github.com/chaosbastler/opentraining target=_blank>OpenTraining</a>, an open source Android app for fitness training.
I recently looked for a possibility to add a simple feedback system to my app.
There&rsquo;s an open source framework for crash reports named <a href=https://github.com/ACRA target=_blank>ACRA</a> that I decided to use for both crash reports and user feedback.</p><p>The Google Play Store offers a crash report system as well, but if you deploy your app on multiple app stores you might want a central instance for collecting crash reports.
For user feedback many apps simply open an email-Intent but I don&rsquo;t think this offers a good user experience.</p><p>This is how the user feedback dialog and the generated mail look like:</p><p><figure><img src=/downloads/android_feedback.jpg alt="Android feedback dialog and feedback mail" title="Android feedback dialog and feedback mail"></figure></p><p>Advantages:</p><ul><li>simple</li><li>self-hosted</li><li>good workflow for smaller projects</li><li>only PHP required</li></ul><p>Disadvantages:</p><ul><li>does not scale (e.g. if you have 50.000+ users)</li></ul><p>If your project is pretty large you should consider another <a href=https://github.com/ACRA/acra/wiki/Backends target=_blank>ACRA-backend</a>. I tried some of them, but as long as I get &lt; 20 emails per week I&rsquo;ll use the PHP backend.</p><p>This How-to is based on <a href=https://github.com/ACRA target=_blank>ACRA</a> and <a href=https://github.com/d-a-n/acra-mailer target=_blank>ACRA-mailer</a>.</p><h2 id=how-to>How-To</h2><p>The most important changes I had to apply to my project for adding the feedback-feature can be seen in <a href=https://github.com/chaosbastler/opentraining/commit/19e52b76b8370e78b9d67e4110d04463d1cd2ad6 target=_blank>this commit</a> on GitHub (but there have been some more commits concerning ACRA).</p><h3 id=1-add-acra-to-your-project>1. Add ACRA to your project</h3><ul><li>Open your Eclipse project</li><li>Add the file <a href="http://search.maven.org/remotecontent?filepath=ch/acra/acra/4.5.0/acra-4.5.0.jar" target=_blank>acra-4.X.Y.jar</a> to the libs folder</li><li>Right-click on the jar file -> add to build path</li></ul><p>If you have any problems with this step have a look at the <a href=https://github.com/ACRA/acra/wiki/BasicSetup target=_blank>ACRA documentation</a>. There&rsquo;s also a description for <a href=https://github.com/ACRA/acra/wiki/AdvancedUsage#integrating-as-a-dependency-with-maven-or-gradle target=_blank>Gradle integration</a>.</p><h3 id=2-use-the-acra-library>2. Use the ACRA library</h3><p>Create a new class that extends Application:</p><pre><code>import org.acra.*;
import org.acra.annotation.*;

import android.app.Application;


@ReportsCrashes(
    formKey = &quot;&quot; // This is required for backward compatibility but not used
 )


public class YourApplication extends Application{
 
    @Override
     public void onCreate() {
         super.onCreate();

         // The following line triggers the initialization of ACRA
         ACRA.init(this);
         ACRA.getErrorReporter().setReportSender(new ACRACrashReportMailer()); // default crash report sender
    }


}
</code></pre><p>Open the android manifest editor (AndroidManifest.xml)</p><ul><li>In the Application tab, click on the Browse button next to the Name field</li><li>Select your newly created Application class</li></ul><p>Make sure that your application requests the permission <strong>&lsquo;android.permission.INTERNET&rsquo;</strong>.</p><h3 id=3-add-reportsender>3. Add ReportSender</h3><p>I use 2 different implementations of ReportSender:</p><ul><li>one to report crashes: <a href=https://github.com/chaosbastler/opentraining/blob/71db0726607885fb815e230886dcebeb93817371/app/src/de/skubware/opentraining/activity/acra/ACRACrashReportMailer.java target=_blank>ACRACrashReportMailer</a></li><li>one to report feedback: <a href=https://github.com/chaosbastler/opentraining/blob/71db0726607885fb815e230886dcebeb93817371/app/src/de/skubware/opentraining/activity/acra/ACRAFeedbackMailer.java target=_blank>ACRAFeedbackMailer</a></li></ul><p>The crash reporter sends nearly all data that&rsquo;s available, the feedback reporter sends the user message, the date and the app version. Add both to your project.</p><p>Remember to change the &lsquo;BASE_URL&rsquo;. Use HTTPS if your server supports it (mine doesn&rsquo;t).</p><h3 id=4-add-php-scripts>4. Add PHP scripts</h3><p>There are 2 PHP scripts as well:</p><ul><li>one to report crashes: <a href=https://github.com/chaosbastler/opentraining/blob/71db0726607885fb815e230886dcebeb93817371/server/acra_crash.php target=_blank>acra_crash.php</a></li><li>one to report feedback: <a href=https://github.com/chaosbastler/opentraining/blob/71db0726607885fb815e230886dcebeb93817371/server/acra_feedback.php target=_blank>acra_feedback.php</a></li></ul><p>You will also need the <a href=https://github.com/chaosbastler/opentraining/blob/71db0726607885fb815e230886dcebeb93817371/server/mail_template.txt target=_blank>mail template</a>.
Change the destination email and add the files to the webspace/server of your choice (e.g. <a href=https://uberspace.de/ target=_blank>uberspace</a>). If you want you can change the &ldquo;shared_secret&rdquo;, but remember to do this in the Java class as well.</p><h3 id=5-test-receiving-feedback>5. Test receiving feedback</h3><p>Now you should have a try and test sending feedback to yourself:</p><pre><code>ACRA.getErrorReporter().setReportSender(new ACRAFeedbackMailer());
ACRA.getErrorReporter().putCustomData(&quot;User message&quot;, &quot;Some Text here&quot;);
ACRA.getErrorReporter().handleSilentException(new NullPointerException(&quot;Test&quot;));
</code></pre><p>If this works you need a suitable spot for your user feedback. In most cases a <a href=https://github.com/chaosbastler/opentraining/blob/71db0726607885fb815e230886dcebeb93817371/app/src/de/skubware/opentraining/activity/create_workout/SendExerciseFeedbackDialogFragment.java target=_blank>dialog</a> should be fine.</p><p>Consider to write your <a href=https://github.com/chaosbastler/opentraining/blob/71db0726607885fb815e230886dcebeb93817371/app/src/de/skubware/opentraining/activity/acra/RequestExerciseUpdate.java target=_blank>own class(es)</a> that extend(s) Exception.
Your PHP script could do further processing with this information.</p><h2 id=ideas-for-further-improvements>Ideas for further improvements</h2><h3 id=improve-the-email-formatting>Improve the email formatting</h3><p>As you have a server-side script it is very easy to change the formatting of the emails.
Highlighting the user comments or the type of exception may be a good first step.</p><h3 id=usage-for-larger-projects>Usage for larger projects</h3><p>With the use of two different implementations of ReportSender it is also possible to use email only for sending feedback and send crash reports to another backend that is better suited for bug tracking.
For larger projects this approach is recommended.</p><p><em>by Christian Skubich</em></p><p>eMail: <a href=mailto:christian@skubware.de>christian@skubware.de</a></p><p>Twitter: <a href=https://twitter.com/chaosbastler target=_blank>@chaosbastler</a></p></div></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"mic92"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main><footer>© 2021 Jörg Thalheim</footer></body></html>