<!doctype html><html lang=en><head><meta charset=utf-8><title>| ~/git/blog</title><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><link rel=stylesheet type=text/css media=screen href=/css/all.css><script data-goatcounter=https://goatcounter.thalheim.io/count async src=https://goatcounter.thalheim.io/count.js></script><meta property="og:title" content><meta property="og:description" content="Buildbot-nix In this article my journey that let me to create buildbot-nix, an extension to the buildbot CI framework to make nix a first class citizen.
How did it come to be, what was the initial motivation? Since maintain a number of project around nix, I often also need a CI to build and test nix-based projects.
Over the years, I tried almost every CI that exists: Hydra, Hercules CI, self-hosted GitHub Actions, Garnix, Drone."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.thalheim.io/1/01/01/"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Buildbot-nix In this article my journey that let me to create buildbot-nix, an extension to the buildbot CI framework to make nix a first class citizen.
How did it come to be, what was the initial motivation? Since maintain a number of project around nix, I often also need a CI to build and test nix-based projects.
Over the years, I tried almost every CI that exists: Hydra, Hercules CI, self-hosted GitHub Actions, Garnix, Drone."><meta itemprop=name content><meta itemprop=description content="Buildbot-nix In this article my journey that let me to create buildbot-nix, an extension to the buildbot CI framework to make nix a first class citizen.
How did it come to be, what was the initial motivation? Since maintain a number of project around nix, I often also need a CI to build and test nix-based projects.
Over the years, I tried almost every CI that exists: Hydra, Hercules CI, self-hosted GitHub Actions, Garnix, Drone."><meta itemprop=wordCount content="219"><meta itemprop=keywords content></head><body><header><div id=titletext><h2 id=title><a href=https://blog.thalheim.io/>~/git/blog</a></h2></div><div id=title-description><p id=subtitle>My brain-dump of random code/configuration.</p><div id=social><nav><ul><li><a href=/index.xml rel=me aria-label=RSS><span title=RSS class="icons fas fa-rss" aria-hidden=true></span></a></li><li><a href=https://github.com/Mic92/blog rel=me aria-label=Github><span title=Github class="icons fab fa-github" aria-hidden=true></span></a></li><li><button id=dark-mode aria-label="Switch Dark Mode"><span title="Switch Dark Mode" class="icons fas fa-moon" aria-hidden=true></span></button></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All Posts</a></li><li><a href=/categories>Categories</a></li></ul></nav></div></header><main><div class=post><article><div class=post-header><div class=matter><h1 class=title></h1><p class=post-meta><span class=post-meta></span></p></div></div><div class=markdown><h1 id=buildbot-nix>Buildbot-nix</h1><p>In this article my journey that let me to create <a href=https://github.com/Mic92/buildbot-nix target=_blank>buildbot-nix</a>,
an extension to the buildbot CI framework to make nix a first class citizen.</p><h2 id=how-did-it-come-to-be-what-was-the-initial-motivation>How did it come to be, what was the initial motivation?</h2><p>Since maintain a number of project around nix, I often also need a CI to build and test nix-based projects.</p><p>Over the years, I tried almost every CI that exists: Hydra, Hercules CI, self-hosted GitHub Actions, Garnix, Drone.io, Gitlab runner, Gitea runner.</p><p>The main thing that was missing was:</p><ul><li>Fast evaluation</li><li>Good github integration</li><li>Support for contributor pull-requests</li><li>It should share the same /nix/store for all the builds, for speed</li><li>Support for virtualization for NixOS tests</li><li>Build matrix based on Nix</li><li>No arbitrary code outside of the Nix sandbox (like GitHub Actions).</li></ul><p>What if all we needed for CI, was a flake, and the CI would build that.</p><h2 id=why-buildbot>Why buildbot</h2><h2 id=what-are-the-requirements>What are the requirements?</h2><h2 id=whats-the-status-of-it-what-can-it-do>What&rsquo;s the status of it, what can it do?</h2><h2 id=what-is-the-vision>What is the vision?</h2><p>You start this with a vision in mind, what is the status, and what are the things that are missing, that you want to do. And what if other people are helping you, would it help to get other things done?</p><h2 id=validation-where-is-it-being-used>Validation: Where is it being used?</h2><h2 id=how-does-it-compare-to-hydra-hercules-ci>How does it compare to Hydra? Hercules CI</h2></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//mic92.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></div></main><footer>© 2021 Jörg Thalheim</footer><script src=/js/dark-mode.js></script></body></html>